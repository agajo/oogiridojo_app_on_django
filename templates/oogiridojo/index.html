<!DOCTYPE html>
<html lang="ja">
<head>
    {% load static %}
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <title>岡竜之介の大喜利道場</title>
</head>
<body>
<h1 id="site_name">岡竜之介の大喜利道場</h1>

{% if odai_list %}
    {% for odai in odai_list %}
        <section id="odai{{ forloop.counter }}">
            <h2>お題：{{ odai.odai_text }}</h2>
                <form id="answer_form" action = "{% url 'oogiridojo:answer_submit' %}" method = "post">
                    {% csrf_token %}
                    <input type="text" name="answer_text" placeholder="例：{{ odai.example_text }}" required>
                    <input type="submit" value="回答を投稿する">
                    <input type="hidden" name="odai_id" value = {{ odai.id }}>
                </form>
            <form id="free_vote_form" action = "{% url 'oogiridojo:free_vote' %}" method="post">
                {% csrf_token %}
                {% if odai.answer_set.all %}
                        <ul>
                        {% for answer in odai.answer_list %}
                            <li>
                                {{ answer.answer_text }}
                                <strong>--{{ answer.free_vote_score }}</strong>
                                <button type='button' class = "free_vote_button" name="free_vote_button" value="{{ answer.id }}">良い</button>
                                {% if answer.is_number_one %}
                                    <strong><font color="red">１位！</font></strong>
                                {% endif %}
                            </li>
                        {% endfor %}
                        </ul>
                {% else %}
                    <p>回答がありません。</p>
                {% endif %}
            </form>
        </section>
    {% endfor %}
{% else %}
    <p>お題がありません。</p>
{% endif %}

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

<script src="{% static 'oogiridojo/script.js' %}"></script>
</body>
</html>
