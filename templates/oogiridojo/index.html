<html>
<head>
    {% load static %}
    <title>岡竜之介の大喜利道場</title>
</head>
<body>
<h1 id="site_name">岡竜之介の大喜利道場</h1>

{% if odai_list %}
    {% for odai in odai_list %}
        <section id="odai{{ forloop.counter }}">
            <h2>お題：{{ odai.odai_text }}</h2>
                <form id="answer_form" action = "{% url 'oogiridojo:answer_submit' %}" method = "post">
                    {% csrf_token %}
                    <input type="text" name="answer_text" placeholder="例：{{ odai.example_text }}" required>
                    <input type="submit" value="回答を投稿する">
                    <input type="hidden" name="odai_id" value = {{ odai.id }}>
                </form>
            <form id="free_vote_form" action = "{% url 'oogiridojo:index' %}" method="post">
                {% csrf_token %}
                {% if odai.answer_set.all %}
                        <ul>
                        {% for answer in odai.answer_list %}
                            <li>
                                {{ answer.answer_text }}
                                <strong>--{{ answer.free_vote_score }}</strong>
                                <button type='button' class = "free_vote_button" name="free_vote_button" value="{{ answer.id }}">良い</button>
                                {% if answer.is_number_one %}
                                    <strong><font color="red">１位！</font></strong>
                                {% endif %}
                            </li>
                        {% endfor %}
                        </ul>
                {% else %}
                    <p>回答がありません。</p>
                {% endif %}
            </form>
        </section>
    {% endfor %}
{% else %}
    <p>お題がありません。</p>
{% endif %}

<!-- Optional Javascript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="{% static 'oogiridojo/script.js' %}"></script>
</body>
</html>
